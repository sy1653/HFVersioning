diff --git a/core/sysprop.mk b/core/sysprop.mk
index bdb85429d6..915c6328be 100644
--- a/core/sysprop.mk
+++ b/core/sysprop.mk
@@ -182,7 +182,13 @@ ifeq (,$(strip $(BUILD_FINGERPRINT)))
   else
     BF_BUILD_NUMBER := $(file <$(BUILD_NUMBER_FILE))
   endif
-  BUILD_FINGERPRINT := $(PRODUCT_BRAND)/$(TARGET_PRODUCT)/$(TARGET_DEVICE):$(PLATFORM_VERSION)/$(BUILD_ID)/$(BF_BUILD_NUMBER):$(TARGET_BUILD_VARIANT)/$(BUILD_VERSION_TAGS)
+ BF_BUILD_NUMBER := {BUILD_NUMBER}
+ifeq ($(TARGET_USES_GMS_PACKAGES),true)
+  HARDCODED_BUILD_ID := $(GMS_BASELINE){BUILD_ID_WITHOUT_BASEFILEGMS}
+else
+  HARDCODED_BUILD_ID := $(NGMS_BASELINE){BUILD_ID_WITHOUT_BASEFILENGMS}
+endif
+  BUILD_FINGERPRINT := $(PRODUCT_BRAND)/$(TARGET_PRODUCT)/$(TARGET_DEVICE):$(PLATFORM_VERSION)/$(HARDCODED_BUILD_ID)/$(BF_BUILD_NUMBER):$(TARGET_BUILD_VARIANT)/$(BUILD_VERSION_TAGS)
 endif

 # For SMR build
